{"version":3,"sources":["index.js"],"names":["api_path","token","data","carts","cartsTotal","productsList","document","querySelector","cartsList","cartsPrice","deleteAll","filter","init","getProductList","getCartList","axios","get","then","response","products","renderProductList","error","console","log","str","forEach","item","content","images","description","id","title","origin_price","price","innerHTML","addEventListener","e","target","value","category","arrayCartId","push","product","clickId","getAttribute","inCarts","includes","idSequence","indexOf","productQuantityInCarts","quantity","productQuantityInCartsAdded","post","finalTotal","renderShoppingCart","subtotalPrice","cartId","deleteCartItem","submit","orderName","orderTel","orderEmail","orderAddress","orderTrade","alert","createOrder","event","preventDefault","options"],"mappings":"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,GAvBH,WAwBS,UAAUS,KAAV,EAAiB;AACtBC,IAAAA,OAAO,CAACC,GAAR,CAAYF,KAAK,CAACH,QAAN,CAAehB,IAA3B;AACD,GA1BH;AA2BD,C,CAID;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["const api_path = \"ginz9013\";\nconst token = \"gtVaknIHOtelzoQpEvYjNzBMCjq1\";\n\nlet data = [];\nlet carts = [];\nlet cartsTotal\n\nconst productsList = document.querySelector(\".js-productsList\");\nconst cartsList = document.querySelector(\".js-cartsList\");\nconst cartsPrice = document.querySelector(\".js-cartsPrice\");\nconst deleteAll = document.querySelector('.js-deleteAll');\nconst filter = document.querySelector('.filter');\n\n// init 產品列表\n// 選擇後重新渲染\n// init 購物車\n// 選擇後重新渲染\n\n// 產品列表\n\nfunction init() {\n  getProductList();\n  getCartList();\n}\n\ninit();\n\n// ------ 產品列表 ------\nfunction getProductList() {\n  axios.get(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/products`).\n    then(function (response) {\n      data = response.data.products;\n      renderProductList();\n    })\n    .catch(function (error) {\n      console.log(error.response.data);\n    })\n}\n\nfunction renderProductList() {\n  let str = \"\";\n  data.forEach(function (item) {\n    let content = `\n      <li class=\"newArrival relative mb-7\">\n        <img src=\"${item.images}\" alt=\"${item.description}\" class=\"object-cover h-80\">\n        <input type=\"button\" value=\"加入購物車\" data-id=\"${item.id}\"\n          class=\"text-xl text-white  bg-black hover:bg-primaryColor-dark2 cursor-pointer py-3 w-full\" data-addCart=\"js-addCart\">\n        <p class=\"text-xl\">${item.title}</p>\n        <p class=\"text-xl line-through\">NT$${item.origin_price}</p>\n        <h3 class=\"text-3xl\">NT$${item.price}</h3>\n      </li>\n    `;\n\n    str += content;\n\n    productsList.innerHTML = str;\n  })\n};\n\n//篩選器\nfilter.addEventListener(\"change\", function (e) {\n\n  let str = \"\";\n\n  data.forEach(function (item) {\n    if (e.target.value === item.category) {\n      let content = `\n        <li class=\"newArrival relative mb-7\">\n          <img src=\"${item.images}\" alt=\"${item.description}\" class=\"object-cover h-80\">\n          <input type=\"button\" value=\"加入購物車\" data-id=\"${item.id}\"\n            class=\"text-xl text-white  bg-black hover:bg-primaryColor-dark2 cursor-pointer py-3 w-full\" data-addCart=\"js-addCart\">\n          <p class=\"text-xl\">${item.title}</p>\n          <p class=\"text-xl line-through\">NT$${item.origin_price}</p>\n          <h3 class=\"text-3xl\">NT$${item.price}</h3>\n        </li>\n      `;\n      str += content;\n\n    } else if (e.target.value === \"all\") {\n      let content = `\n        <li class=\"newArrival relative mb-7\">\n          <img src=\"${item.images}\" alt=\"${item.description}\" class=\"object-cover h-80\">\n          <input type=\"button\" value=\"加入購物車\" data-id=\"${item.id}\"\n            class=\"text-xl text-white  bg-black hover:bg-primaryColor-dark2 cursor-pointer py-3 w-full\" data-addCart=\"js-addCart\">\n          <p class=\"text-xl\">${item.title}</p>\n          <p class=\"text-xl line-through\">NT$${item.origin_price}</p>\n          <h3 class=\"text-3xl\">NT$${item.price}</h3>\n        </li>\n      `;\n      str += content;\n    }\n  });\n\n  productsList.innerHTML = str;\n})\n\nproductsList.addEventListener('click', function (e) {\n  // 自組的購物車id陣列\n  let arrayCartId = [];\n  carts.forEach(function (item) {\n    arrayCartId.push(item.product.id)\n  });\n\n  // 點擊的商品id\n  const clickId = e.target.getAttribute(\"data-id\");\n\n  // 判斷購物車是否含有該商品\n  const inCarts = arrayCartId.includes(clickId);\n\n\n\n  if (e.target.getAttribute(\"data-addCart\") !== \"js-addCart\") {\n    return;\n  } else {\n    if (inCarts) {\n      // 購物車內點擊的商品id順序\n      const idSequence = arrayCartId.indexOf(clickId);\n      // 購物車內點擊的商品目前數量\n      const productQuantityInCarts = carts[idSequence].quantity;\n      // 購物車內點擊的商品目前數量+1\n      const productQuantityInCartsAdded = productQuantityInCarts + 1;\n\n      axios.post(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/carts`, {\n        \"data\": {\n          \"productId\": clickId,\n          \"quantity\": productQuantityInCartsAdded\n        }\n      }).\n        then(function (response) {\n          console.log(response.data);\n          init();\n        })\n        .catch(function (error) {\n          console.log(error.response.data)\n        })\n    } else {\n      axios.post(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/carts`, {\n        \"data\": {\n          \"productId\": clickId,\n          \"quantity\": 1\n        }\n      }).\n        then(function (response) {\n          console.log(response.data);\n          init();\n        })\n        .catch(function (error) {\n          console.log(error.response.data)\n        })\n    }\n\n    // console.log(arrayCartId.indexOf(clickId));\n\n\n\n    // if (clickId) {\n    //   carts.forEach(function (item) {\n    //     if (clickId == item.product.id) {\n    //       item.quantity += 1;\n    //       init();\n    //     } else {\n    //       return;\n    //     }\n    //   })\n    // } else {\n    //   let targetId = e.target.getAttribute(\"data-ids\");\n    //   // console.log(typeof targetId);\n    //   axios.post(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/carts`, {\n    //     \"data\": {\n    //       \"productId\": targetId,\n    //       \"quantity\": 1\n    //     }\n    //   }).\n    //     then(function (response) {\n    //       console.log(response.data);\n    //       init();\n    //     })\n    //     .catch(function (error) {\n    //       console.log(error.response.data)\n    //     })\n\n\n    // 按鈕class\n    // 按鈕id\n    // 購物車商品id陣列\n    // .includes()  判斷是否已經有該商品\n    // 是：.indexOf() 抓出購物車商品id 在陣列中的排序\n    // 新的商品數量 = 目前carts中數量+1\n    // axios.post\n\n    // 否：\n    // axios.post 數量1\n\n    // 點擊到按鈕\n    // 抓取按鈕class\n    // 比對按鈕id跟購物車內商品id 是否有重複\n    // 是：商品數量+1\n    // 否：新增商品種類，數量為1\n\n\n    // 方法三 - 完成一半\n    // let targetId = e.target.getAttribute(\"data-id\");\n    // let inCarts = false;\n\n    // console.log(inCarts, targetId);\n\n    // carts.forEach(function (item) {\n    //   if (targetId == item.product.id) {\n    //     inCarts = true;\n    //     let addedQuantity = item.quantity += 1;\n    //     console.log(inCarts, addedQuantity);\n    //     axios.post(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/carts`, {\n    //       \"data\": {\n    //         \"productId\": targetId,\n    //         \"quantity\": addedQuantity\n    //       }\n    //     }).\n    //       then(function (response) {\n    //         console.log(response.data);\n    //         init();\n    //       })\n    //       .catch(function (error) {\n    //         console.log(error.response.data)\n    //       })\n    //   } else {\n    //     console.log(\"error\");\n    //     return;\n    //   }\n    // })\n\n    // if (inCarts == false) {\n    //   console.log(\"新增\")\n    //   axios.post(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/carts`, {\n    //     \"data\": {\n    //       \"productId\": targetId,\n    //       \"quantity\": 1\n    //     }\n    //   }).\n    //     then(function (response) {\n    //       console.log(response.data);\n    //       init();\n    //     })\n    //     .catch(function (error) {\n    //       console.log(error.response.data)\n    //     })\n    // }\n\n    // 方法二 - 失敗\n    // let cartId = [];\n    // carts.forEach(function (item) {\n    //   cartId.push(item.product.id)\n    // });\n    // console.log(cartId);\n\n    // let clickId = cartId.includes(e.target.getAttribute(\"data-ids\"));\n\n    // if (clickId) {\n    //   carts.forEach(function (item) {\n    //     if (clickId == item.product.id) {\n    //       item.quantity += 1;\n    //       init();\n    //     } else {\n    //       return;\n    //     }\n    //   })\n    // } else {\n    //   let targetId = e.target.getAttribute(\"data-ids\");\n    //   // console.log(typeof targetId);\n    //   axios.post(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/carts`, {\n    //     \"data\": {\n    //       \"productId\": targetId,\n    //       \"quantity\": 1\n    //     }\n    //   }).\n    //     then(function (response) {\n    //       console.log(response.data);\n    //       init();\n    //     })\n    //     .catch(function (error) {\n    //       console.log(error.response.data)\n    //     })\n  }\n\n\n  // 方法一\n  // console.log(e.target.getAttribute(\"data-ids\"));\n\n  // let id = e.target.getAttribute(\"data-ids\");\n\n  // 透過carts.forEach跑過所有目前購物車內的商品id，然後宣告一個變數上去\n  // 用switch，在 case 上加入上面的變數\n\n  // carts.forEach(function (item) {\n  //   if (item.product.id === id) {\n  //     item.quantity += 1;\n  //   } else {\n  //     axios.post(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/carts`, {\n  //       \"data\": {\n  //         \"productId\": id,\n  //         \"quantity\": 1\n  //       }\n  //     }).\n  //       then(function (response) {\n  //         console.log(response.data);\n  //         renderShoppingCart()\n  //       })\n  //       .catch(function (error) {\n  //         console.log(error.response.data)\n  //       })\n  //   }\n  // });\n\n});\n\n\n// ------ 購物車 ------\nfunction getCartList() {\n  axios.get(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/carts`).\n    then(function (response) {\n      carts = response.data.carts;\n      cartsTotal = response.data.finalTotal;\n      renderShoppingCart();\n    })\n    .catch(function (error) {\n      console.log(error.response.data);\n    })\n}\n\nfunction renderShoppingCart() {\n  let str = \"\";\n  carts.forEach(function (item) {\n    let subtotalPrice = item.product.price * item.quantity;\n    let content = `\n    <div class=\"col-span-2 flex bottomLine relative my-5\">\n      <img src=\"${item.product.images}\" alt=\"${item.product.description}\" class=\"h-20\">\n      <div class=\"flex items-center ml-4\">\n        <p class=\"text-xl\">${item.product.title}</p>\n      </div>\n    </div>\n    <div class=\"flex items-center\">\n      <p>NT$${item.product.price}</p>\n    </div>\n    <div class=\"flex items-center\">\n      <p>${item.quantity}</p>\n    </div>\n    <div class=\"flex items-center\">\n      <p>NT$${subtotalPrice}</p>\n    </div>\n    <div class=\"flex justify-center items-center\">\n      <i class=\"fas fa-times fa-2x cursor-pointer\" data-delProduct=\"delProduct\" data-cartId=\"${item.id}\"></i>\n    </div>\n    `;\n\n    str += content;\n  })\n  cartsList.innerHTML = str;\n  cartsPrice.innerHTML = `NT$${cartsTotal}`;\n}\n\n// 刪除購物車內全部商品\ndeleteAll.addEventListener('click', function () {\n  axios.delete(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/carts`).\n    then(function (response) {\n      console.log(response.data);\n      init();\n    })\n});\n\n// 刪除購物車內指定商品\ncartsList.addEventListener(\"click\", function (e) {\n  const cartId = e.target.getAttribute(\"data-cartId\");\n  if (e.target.getAttribute(\"data-delProduct\") !== \"delProduct\") {\n    console.log(\"點擊錯誤\")\n  } else {\n    console.log(cartId);\n    deleteCartItem(cartId);\n  }\n\n})\n\nfunction deleteCartItem(cartId) {\n  axios.delete(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/carts/${cartId}`).\n    then(function (response) {\n      console.log(response.data);\n      init();\n    })\n}\n\n\n\n// ------ 預定表單 ------\n\nconst submit = document.querySelector(\".js-submit\");\n\n\nconst orderName = document.querySelector(\".js-name\");\nconst orderTel = document.querySelector(\".js-tel\");\nconst orderEmail = document.querySelector(\".js-email\");\nconst orderAddress = document.querySelector(\".js-address\");\nconst orderTrade = document.querySelector(\".js-trade\");\n\n\n// 送出購買訂單\nsubmit.addEventListener(\"click\", function (e) {\n  if (orderName.value == \"\") {\n    alert(\"請輸入姓名\");\n  } else if (orderTel.value == \"\") {\n    alert(\"請輸入電話\");\n  } else if (orderEmail.value == \"\") {\n    alert(\"請輸入 Email\");\n  } else if (orderAddress.value == \"\") {\n    alert(\"請輸入地址\");\n  } else if (orderTrade.value == \"\") {\n    alert(\"請選擇交易方式\");\n  } else {\n    createOrder();\n  }\n  event.preventDefault();\n})\n\nfunction createOrder() {\n  axios.post(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/orders`,\n    {\n      \"data\": {\n        \"user\": {\n          \"name\": orderName.value,\n          \"tel\": orderTel.value,\n          \"email\": orderEmail.value,\n          \"address\": orderAddress.value,\n          \"payment\": orderTrade.value\n        }\n      }\n    }\n  ).\n    then(function (response) {\n      console.log(response.data);\n\n      orderName.value = \"\";\n      orderTel.value = \"\";\n      orderEmail.value = \"\";\n      orderAddress.value = \"\";\n      orderTrade.value = orderTrade.options[0].value;\n\n      init();\n    })\n    .catch(function (error) {\n      console.log(error.response.data);\n    })\n}\n\n\n\n// // 請代入自己的網址路徑\n// const api_path = \"ginz9013\";\n// const token = \"gtVaknIHOtelzoQpEvYjNzBMCjq1\";\n\n// // 取得產品列表\n// function getProductList() {\n//   axios.get(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/products`).\n//     then(function (response) {\n//       console.log(response.data);\n//     })\n//     .catch(function (error) {\n//       console.log(error.response.data)\n//     })\n// }\n\n// // 加入購物車\n// function addCartItem() {\n//   axios.post(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/carts`, {\n//     data: {\n//       \"productId\": \"vLiN2yZ0cFkJw45Q8tC3\",\n//       \"quantity\": 7\n//     }\n//   }).\n//     then(function (response) {\n//       console.log(response.data);\n//     })\n\n// }\n\n\n// // 取得購物車列表\n// function getCartList() {\n//   axios.get(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/carts`).\n//     then(function (response) {\n//       console.log(response.data);\n//     })\n// }\n\n// // 清除購物車內全部產品\n// function deleteAllCartList() {\n//   axios.delete(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/carts`).\n//     then(function (response) {\n//       console.log(response.data);\n//     })\n// }\n\n// // 刪除購物車內特定產品\n// function deleteCartItem(cartId) {\n//   axios.delete(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/carts/${cartId}`).\n//     then(function (response) {\n//       console.log(response.data);\n//     })\n// }\n\n// // 送出購買訂單\n// function createOrder() {\n\n//   axios.post(`https://livejs-api.hexschool.io/api/livejs/v1/customer/${api_path}/orders`,\n//     {\n//       \"data\": {\n//         \"user\": {\n//           \"name\": \"六角學院\",\n//           \"tel\": \"07-5313506\",\n//           \"email\": \"hexschool@hexschool.com\",\n//           \"address\": \"高雄市六角學院路\",\n//           \"payment\": \"Apple Pay\"\n//         }\n//       }\n//     }\n//   ).\n//     then(function (response) {\n//       console.log(response.data);\n//     })\n//     .catch(function (error) {\n//       console.log(error.response.data);\n//     })\n// }\n\n// // 取得訂單列表\n// function getOrderList() {\n//   axios.get(`https://livejs-api.hexschool.io/api/livejs/v1/admin/${api_path}/orders`,\n//     {\n//       headers: {\n//         'Authorization': token\n//       }\n//     })\n//     .then(function (response) {\n//       console.log(response.data);\n//     })\n// }\n\n// // 修改訂單狀態\n\n// function editOrderList(orderId) {\n//   axios.put(`https://livejs-api.hexschool.io/api/livejs/v1/admin/${api_path}/orders`,\n//     {\n//       \"data\": {\n//         \"id\": orderId,\n//         \"paid\": true\n//       }\n//     },\n//     {\n//       headers: {\n//         'Authorization': token\n//       }\n//     })\n//     .then(function (response) {\n//       console.log(response.data);\n//     })\n// }\n\n// // 刪除全部訂單\n// function deleteAllOrder() {\n//   axios.delete(`https://livejs-api.hexschool.io/api/livejs/v1/admin/${api_path}/orders`,\n//     {\n//       headers: {\n//         'Authorization': token\n//       }\n//     })\n//     .then(function (response) {\n//       console.log(response.data);\n//     })\n// }\n\n// // 刪除特定訂單\n// function deleteOrderItem(orderId) {\n//   axios.delete(`https://livejs-api.hexschool.io/api/livejs/v1/admin/${api_path}/orders/${orderId}`,\n//     {\n//       headers: {\n//         'Authorization': token\n//       }\n//     })\n//     .then(function (response) {\n//       console.log(response.data);\n//     })\n// }\n\n\n"],"file":"index.js"}